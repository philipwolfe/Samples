<ns0:BpelProcess x:Class="CompensationSample.CompensationWorkflow" x:Name="CompensationWorkflow" TargetNamespace="http://tempuri.org/" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/workflow" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:ns0="clr-namespace:Microsoft.Workflow.Bpel.Activities;Assembly=Microsoft.Workflow.Bpel.Activities, Version=1.0.0.0, Culture=neutral, PublicKeyToken=71530258abd56239">
	<ns0:BpelProcess.PartnerLinks>
		<ns0:PartnerLink Name="file" MyRole="application" Namespace="ns0" LinkType="fileLinkType" />
	</ns0:BpelProcess.PartnerLinks>
	<ns0:BpelProcess.XmlNamespaces>
		<ns0:XmlNamespace Alias="xmlns" Namespace="http://schemas.xmlsoap.org/ws/2003/03/business-process/" />
		<ns0:XmlNamespace Alias="tns" Namespace="http://tempuri.org/" />
		<ns0:XmlNamespace Alias="xsd" Namespace="http://www.w3.org/2001/XMLSchema" />
		<ns0:XmlNamespace Alias="bpws" Namespace="http://schemas.xmlsoap.org/ws/2003/03/business-process/" />
		<ns0:XmlNamespace Alias="wsdl" Namespace="http://schemas.xmlsoap.org/wsdl/" />
	</ns0:BpelProcess.XmlNamespaces>
	<ns0:BpelProcess.Variables>
		<ns0:Variable FieldName="WriteLineOut" XmlType="{x:Null}" Category="WsdlMessageType" Namespace="ns0" FieldType="writeLineSoapIn" />
	</ns0:BpelProcess.Variables>
	<ns0:BpelSequence x:Name="MySequence">
		<ns0:BpelScope x:Name="MyScope">
			<ns0:BpelEmpty x:Name="Empty" />
			<CompensationHandlerActivity x:Name="MyCompensationHandler">
				<ns0:BpelSequence x:Name="CompensationSequence">
					<ns0:BpelAssign x:Name="Copy">
						<ns0:BpelCopy x:Name="CopyString">
							<ns0:BpelCopy.From>
								<ns0:From Expression="'Compensation done!'" SelectFrom="Expression">
									<ns0:From.XmlNamespaces>
										<ns0:XmlNamespace Alias="xml" Namespace="http://www.w3.org/XML/1998/namespace" />
										<ns0:XmlNamespace Alias="" Namespace="http://schemas.xmlsoap.org/ws/2003/03/business-process/" />
										<ns0:XmlNamespace Alias="tns" Namespace="http://HelloWorld/" />
										<ns0:XmlNamespace Alias="xsd" Namespace="http://www.w3.org/2001/XMLSchema" />
										<ns0:XmlNamespace Alias="bpws" Namespace="http://schemas.xmlsoap.org/ws/2003/03/business-process/" />
										<ns0:XmlNamespace Alias="wsdl" Namespace="http://schemas.xmlsoap.org/wsdl/" />
									</ns0:From.XmlNamespaces>
								</ns0:From>
							</ns0:BpelCopy.From>
							<ns0:BpelCopy.To>
								<ns0:To Variable="WriteLineOut" Query="/tns:parameters/tns:message" SelectTo="VariablePartQuery" Part="parameters">
									<ns0:To.XmlNamespaces>
										<ns0:XmlNamespace Alias="xml" Namespace="http://www.w3.org/XML/1998/namespace" />
										<ns0:XmlNamespace Alias="" Namespace="http://schemas.xmlsoap.org/ws/2003/03/business-process/" />
										<ns0:XmlNamespace Alias="tns" Namespace="http://tempuri.org/" />
										<ns0:XmlNamespace Alias="xsd" Namespace="http://www.w3.org/2001/XMLSchema" />
										<ns0:XmlNamespace Alias="bpws" Namespace="http://schemas.xmlsoap.org/ws/2003/03/business-process/" />
										<ns0:XmlNamespace Alias="wsdl" Namespace="http://schemas.xmlsoap.org/wsdl/" />
									</ns0:To.XmlNamespaces>
								</ns0:To>
							</ns0:BpelCopy.To>
						</ns0:BpelCopy>
					</ns0:BpelAssign>
					<ns0:BpelInvoke PortType="ns0.FileServiceSoap" x:Name="WriteLine" OutputVariable="" Operation="writeLine" InputVariable="WriteLineOut" PartnerLink="file" />
				</ns0:BpelSequence>
			</CompensationHandlerActivity>
		</ns0:BpelScope>
		<ns0:BpelThrow x:Name="ThrowMyFault" FaultName="MyFault" FaultVariable="" />
	</ns0:BpelSequence>
	<FaultHandlersActivity x:Name="faultHandlersActivity1">
		<FaultHandlerActivity x:Name="faultHandlerActivity1" FaultType="{x:Type ns0:BpelException}">
			<ns0:BpelFaultHandler x:Name="MyFaultHandler">
				<ns0:BpelCatch x:Name="CatchFault" FaultVariable="" FaultName="MyFault">
					<CompensateActivity x:Name="CompensateWorkflow" TargetActivityName="CompensationWorkflow" />
				</ns0:BpelCatch>
			</ns0:BpelFaultHandler>
		</FaultHandlerActivity>
	</FaultHandlersActivity>
</ns0:BpelProcess>