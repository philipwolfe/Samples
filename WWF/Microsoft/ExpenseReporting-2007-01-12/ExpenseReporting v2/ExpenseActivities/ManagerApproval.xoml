<SequenceActivity x:Class="ExpenseActivities.ManagerApproval" x:Name="ManagerApproval" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/workflow">
	<CallExternalMethodActivity x:Name="requestManagerApproval1" InterfaceType="{x:Type ExpenseLocalServices.IExpenseLocalService}" MethodName="RequestManagerApproval">
		<CallExternalMethodActivity.ParameterBindings>
			<WorkflowParameterBinding ParameterName="ManagerEmployeeId">
				<WorkflowParameterBinding.Value>
					<ActivityBind Name="ManagerApproval" Path="ManagerEmployeeId" />
				</WorkflowParameterBinding.Value>
			</WorkflowParameterBinding>
			<WorkflowParameterBinding ParameterName="report">
				<WorkflowParameterBinding.Value>
					<ActivityBind Name="ManagerApproval" Path="report" />
				</WorkflowParameterBinding.Value>
			</WorkflowParameterBinding>
		</CallExternalMethodActivity.ParameterBindings>
	</CallExternalMethodActivity>
	<ListenActivity x:Name="ListenForManagerApproval">
		<EventDrivenActivity x:Name="ManagerReviewed">
			<HandleExternalEventActivity x:Name="expenseReportReviewed1" EventName="ExpenseReportReviewed" InterfaceType="{x:Type ExpenseLocalServices.IExpenseLocalService}">
				<HandleExternalEventActivity.ParameterBindings>
					<WorkflowParameterBinding ParameterName="e">
						<WorkflowParameterBinding.Value>
							<ActivityBind Name="ManagerApproval" Path="reviewArgs" />
						</WorkflowParameterBinding.Value>
					</WorkflowParameterBinding>
				</HandleExternalEventActivity.ParameterBindings>
			</HandleExternalEventActivity>
			<IfElseActivity x:Name="EvaluateReview">
				<IfElseBranchActivity x:Name="IfApproved">
					<IfElseBranchActivity.Condition>
						<RuleConditionReference ConditionName="Condition1" />
					</IfElseBranchActivity.Condition>
					<CallExternalMethodActivity x:Name="approveExpenseReport2" InterfaceType="{x:Type ExpenseLocalServices.IExpenseLocalService}" MethodName="ApproveExpenseReport">
						<CallExternalMethodActivity.ParameterBindings>
							<WorkflowParameterBinding ParameterName="report">
								<WorkflowParameterBinding.Value>
									<ActivityBind Name="ManagerApproval" Path="report" />
								</WorkflowParameterBinding.Value>
							</WorkflowParameterBinding>
						</CallExternalMethodActivity.ParameterBindings>
					</CallExternalMethodActivity>
				</IfElseBranchActivity>
				<IfElseBranchActivity x:Name="ElseDeclined">
					<CallExternalMethodActivity x:Name="rejectExpenseReport1" InterfaceType="{x:Type ExpenseLocalServices.IExpenseLocalService}" MethodName="RejectExpenseReport">
						<CallExternalMethodActivity.ParameterBindings>
							<WorkflowParameterBinding ParameterName="report">
								<WorkflowParameterBinding.Value>
									<ActivityBind Name="ManagerApproval" Path="report" />
								</WorkflowParameterBinding.Value>
							</WorkflowParameterBinding>
						</CallExternalMethodActivity.ParameterBindings>
					</CallExternalMethodActivity>
				</IfElseBranchActivity>
			</IfElseActivity>
		</EventDrivenActivity>
		<EventDrivenActivity x:Name="ReviewTimeout">
			<DelayActivity TimeoutDuration="00:00:30" x:Name="delayActivity1" />
			<CallExternalMethodActivity x:Name="rejectExpenseReport2" InterfaceType="{x:Type ExpenseLocalServices.IExpenseLocalService}" MethodName="RejectExpenseReport">
				<CallExternalMethodActivity.ParameterBindings>
					<WorkflowParameterBinding ParameterName="report">
						<WorkflowParameterBinding.Value>
							<ActivityBind Name="ManagerApproval" Path="report" />
						</WorkflowParameterBinding.Value>
					</WorkflowParameterBinding>
				</CallExternalMethodActivity.ParameterBindings>
			</CallExternalMethodActivity>
		</EventDrivenActivity>
	</ListenActivity>
</SequenceActivity>